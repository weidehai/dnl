!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).dnl=t()}(this,(function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t={},o=Object.prototype.hasOwnProperty;function n(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function r(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var n,s,a=[];for(s in"string"!=typeof t&&(t="?"),e)if(o.call(e,s)){if((n=e[s])||null!=n&&!isNaN(n)||(n=""),s=r(s),n=r(n),null===s||null===n)continue;a.push(s+"="+n)}return a.length?t+a.join("&"):""},t.parse=function(e){for(var t,o=/([^=?#&]+)=?([^&]*)/g,r={};t=o.exec(e);){var s=n(t[1]),a=n(t[2]);null===s||null===a||s in r||(r[s]=a)}return r};var s=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e},a=t,l=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,i=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,p=/^[a-zA-Z]:/,u=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function c(e){return(e||"").toString().replace(u,"")}var h=[["#","hash"],["?","query"],function(e,t){return m(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function d(t){var o,n=("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}).location||{},r={},s=typeof(t=t||n);if("blob:"===t.protocol)r=new g(unescape(t.pathname),{});else if("string"===s)for(o in r=new g(t,{}),f)delete r[o];else if("object"===s){for(o in t)o in f||(r[o]=t[o]);void 0===r.slashes&&(r.slashes=l.test(t.href))}return r}function m(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function y(e,t){e=c(e),t=t||{};var o,n=i.exec(e),r=n[1]?n[1].toLowerCase():"",s=!!n[2],a=!!n[3],l=0;return s?a?(o=n[2]+n[3]+n[4],l=n[2].length+n[3].length):(o=n[2]+n[4],l=n[2].length):a?(o=n[3]+n[4],l=n[3].length):o=n[4],"file:"===r?l>=2&&(o=o.slice(2)):m(r)?o=n[4]:r?s&&(o=o.slice(2)):l>=2&&m(t.protocol)&&(o=n[4]),{protocol:r,slashes:s||m(r),slashesCount:l,rest:o}}function g(e,t,o){if(e=c(e),!(this instanceof g))return new g(e,t,o);var n,r,l,i,u,f,w=h.slice(),v=typeof t,b=this,x=0;for("object"!==v&&"string"!==v&&(o=t,t=null),o&&"function"!=typeof o&&(o=a.parse),n=!(r=y(e||"",t=d(t))).protocol&&!r.slashes,b.slashes=r.slashes||n&&t.slashes,b.protocol=r.protocol||t.protocol||"",e=r.rest,("file:"===r.protocol&&(2!==r.slashesCount||p.test(e))||!r.slashes&&(r.protocol||r.slashesCount<2||!m(b.protocol)))&&(w[3]=[/(.*)/,"pathname"]);x<w.length;x++)"function"!=typeof(i=w[x])?(l=i[0],f=i[1],l!=l?b[f]=e:"string"==typeof l?~(u=e.indexOf(l))&&("number"==typeof i[2]?(b[f]=e.slice(0,u),e=e.slice(u+i[2])):(b[f]=e.slice(u),e=e.slice(0,u))):(u=l.exec(e))&&(b[f]=u[1],e=e.slice(0,u.index)),b[f]=b[f]||n&&i[3]&&t[f]||"",i[4]&&(b[f]=b[f].toLowerCase())):e=i(e,b);o&&(b.query=o(b.query)),n&&t.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==t.pathname)&&(b.pathname=function(e,t){if(""===e)return t;for(var o=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=o.length,r=o[n-1],s=!1,a=0;n--;)"."===o[n]?o.splice(n,1):".."===o[n]?(o.splice(n,1),a++):a&&(0===n&&(s=!0),o.splice(n,1),a--);return s&&o.unshift(""),"."!==r&&".."!==r||o.push(""),o.join("/")}(b.pathname,t.pathname)),"/"!==b.pathname.charAt(0)&&m(b.protocol)&&(b.pathname="/"+b.pathname),s(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(i=b.auth.split(":"),b.username=i[0]||"",b.password=i[1]||""),b.origin="file:"!==b.protocol&&m(b.protocol)&&b.host?b.protocol+"//"+b.host:"null",b.href=b.toString()}g.prototype={set:function(e,t,o){var n=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(o||a.parse)(t)),n[e]=t;break;case"port":n[e]=t,s(t,n.protocol)?t&&(n.host=n.hostname+":"+t):(n.host=n.hostname,n[e]="");break;case"hostname":n[e]=t,n.port&&(t+=":"+n.port),n.host=t;break;case"host":n[e]=t,/:\d+$/.test(t)?(t=t.split(":"),n.port=t.pop(),n.hostname=t.join(":")):(n.hostname=t,n.port="");break;case"protocol":n.protocol=t.toLowerCase(),n.slashes=!o;break;case"pathname":case"hash":if(t){var r="pathname"===e?"/":"#";n[e]=t.charAt(0)!==r?r+t:t}else n[e]=t;break;default:n[e]=t}for(var l=0;l<h.length;l++){var i=h[l];i[4]&&(n[i[1]]=n[i[1]].toLowerCase())}return n.origin="file:"!==n.protocol&&m(n.protocol)&&n.host?n.protocol+"//"+n.host:"null",n.href=n.toString(),n},toString:function(e){e&&"function"==typeof e||(e=a.stringify);var t,o=this,n=o.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var r=n+(o.slashes||m(o.protocol)?"//":"");return o.username&&(r+=o.username,o.password&&(r+=":"+o.password),r+="@"),r+=o.host+o.pathname,(t="object"==typeof o.query?e(o.query):o.query)&&(r+="?"!==t.charAt(0)?"?"+t:t),o.hash&&(r+=o.hash),r}},g.extractProtocol=y,g.location=d,g.trimLeft=c,g.qs=a;var w=g;return function(e){var t=e.url,o=e.method,n=void 0===o?"GET":o,r=e.data,s=e.name,a=new w(t),l=new XMLHttpRequest;l.open(n,t),l.responseType="blob",l.onload=function(){var e=URL.createObjectURL(l.response),t=document.createElement("a");t.href=e,t.download=null!=s?s:a.pathname.split("/").pop(),t.click()},l.send(r)}}));
